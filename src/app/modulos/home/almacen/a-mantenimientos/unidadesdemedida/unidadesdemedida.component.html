<div class="margintabla">
    <div class="contenidoTable card-box">

        <ngx-spinner bdColor="rgba(0,0,0,0.8)" size="meidum" color="#fff" type="timer" [fullScreen]="true">
            <p style="font-size: 20px; color: white">Cargando... porfavor espere </p>
        </ngx-spinner> 

        <p-toolbar>
            <div class="p-toolbar-group-left">
                <h3>  <i class="fas fa-thermometer-half"></i>UNIDADES DE MEDIDA</h3>
            </div>
    
            <div class="p-toolbar-group-right">
                <button
                    class="p-button-registrar" 
                    pButton
                    type="button"
                    icon="pi pi-plus"
                    label="Agregar"
                    tooltipPosition="left"
                    pTooltip="Agregar nueva Unidad Medida"
                    (click)="onAdd()">
                </button>
            </div>
        </p-toolbar>
    
        <div class="p-col-12"> 
            <div style="align-items: flex-end;" class="p-fluid p-formgrid p-grid">
                <div class="p-field p-col-12 p-md-8">
                    <strong >Buscar:</strong>
                    <input   
                    pInputText
                    type="text"
                    class="p-inputtext-sm-clear-grey pd-5 width-100"
                    placeholder="Buscar unidad Medida"
                    size="25"
                    (input)="dt.filterGlobal($any($event.target).value, 'contains')"/>             
                </div>
                
            </div>
        </div>
 
            <p-table #dt
            [paginator]="true"
            [rows]="10"
            [columns]="cols"
            responsiveLayout="stack"
            selectionMode="single"
            [rowHover]="true"
            [value]="listUnidadMedida">

                <ng-template pTemplate="header" let-columns >
                    <tr>
                        <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                            {{ col.header }}
                            <p-sortIcon *ngIf="col.field != 'acciones'"
                                [field]="col.field"
                                ariaLabel="Activate to sort"
                                ariaLabelDesc="Activate to sort in descending order"
                                ariaLabelAsc="Activate to sort in ascending order">
                            </p-sortIcon>
                        </th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-unidad let-columns="columns"  let-rowIndex="rowIndex">
                    <tr [pSelectableRow]="unidad" [pSelectableRowIndex]="rowIndex">
                        <td  *ngFor="let col of columns" >
                            <strong class="p-column-title">{{ col.header | uppercase}}</strong>  {{unidad[col.field]}}
                            <ng-template #botones [ngIf]="col.field === 'acciones'">
                                <div style="display: flex;">
                                  <button 
                                    pButton
                                    type="button"
                                    class="p-button-generico-azul"
                                    (click)="onEdit(unidad.unidadmedidaid)"
                                    tooltipPosition="top"
                                    pTooltip="Editar Und. Medida"
                                    icon="pi pi-pencil">
                                  </button>
                                  <button
                                    pButton
                                    type="button"
                                    class="p-button-cancelar" 
                                    (click)="onDelete(unidad)"
                                    tooltipPosition="top"
                                    pTooltip="Eliminar Und. Medida"
                                    icon="pi pi-trash">
                                  </button>
                                </div>

                            </ng-template>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
    </div>

    <div *ngIf="modalNuevoUnidadMedida">
        <p-dialog   [header]="(!idUnidadMedida) ? 'NUEVA UNIDAD DE MEDIDA' : 'EDITAR UNIDAD DE MEDIDA'" [(visible)]="modalNuevoUnidadMedida" [modal]="true" [draggable]="false" [resizable]="true" [style]="{width: '50vw'}">
            <app-nuevo-unidaddemedida [idUnidadMedida]="idUnidadMedida"   (cerrar)="onRetornar($event)" > </app-nuevo-unidaddemedida>
        </p-dialog>
    </div>

</div>




