<ngx-spinner bdColor="rgba(0,0,0,0.8)" size="meidum" [zIndex]="997"  color="#fff" type="timer" [fullScreen]="true">
    <p style="font-size: 20px; color: white">CARGANDO. </p>
</ngx-spinner> 

<div class="margintabla-home">
    <div class="card-box">  
        <p-toolbar>
            <div class="p-toolbar-group-left">
                <h3>  <i class="fas fa-thermometer-half"></i>UNIDADES DE MEDIDA</h3>
            </div>
    
            <div class="p-toolbar-group-right">
                <button
                    class="p-button-registrar" 
                    pButton
                    type="button"
                    icon="pi pi-plus"
                    label="Agregar"
                    tooltipPosition="left"
                    pTooltip="Agregar nueva Unidad Medida"
                    (click)="onAdd()">
                </button>
            </div>
        </p-toolbar>
     
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-8">
                <strong >Buscar:</strong>
                <span class="p-input-icon-right w-100">
                <i class="pi pi-search"></i>
                <input pInputText type="text" style="background: #b5e2fc!important" class="p-inputtext-sm-form" placeholder="Buscar" size="25"
                    (input)="dt.filterGlobal($any($event.target).value, 'contains')" />
                </span>         
            </div> 
        </div>
         
    </div> 

    <br>

    <div class="card-box">
        <p-table #dt
            [paginator]="true"
            [rows]="10"
            [columns]="cols"
            responsiveLayout="scroll"
            selectionMode="single"
            [rowHover]="true"
            [value]="listUnidadMedida">

            <ng-template pTemplate="header" let-columns >
                <tr>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                        {{ col.header }}
                        <p-sortIcon *ngIf="col.field != 'acciones'"
                            [field]="col.field"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order">
                        </p-sortIcon>
                    </th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-unidad let-columns="columns"  let-rowIndex="rowIndex">
                <tr [pSelectableRow]="unidad" [pSelectableRowIndex]="rowIndex">
                    <td  *ngFor="let col of columns" >
                        <strong class="p-column-title">{{ col.header | uppercase}}</strong>  {{unidad[col.field]}}
                        <ng-template #botones [ngIf]="col.field === 'acciones'">
                            <div style="display: flex;">
                                <button 
                                pButton
                                type="button"
                                class="p-button-generico-azul"
                                (click)="onEdit(unidad.unidadmedidaid)"
                                tooltipPosition="top"
                                pTooltip="Editar Und. Medida"
                                icon="pi pi-pencil">
                                </button>
                                <button
                                pButton
                                type="button"
                                class="p-button-cancelar" 
                                (click)="onDelete(unidad)"
                                tooltipPosition="top"
                                pTooltip="Eliminar Und. Medida"
                                icon="pi pi-trash">
                                </button>
                            </div>

                        </ng-template>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <div *ngIf="modalNuevoUnidadMedida">
        <p-dialog   [header]="(!idUnidadMedida) ? 'NUEVA UNIDAD DE MEDIDA' : 'EDITAR UNIDAD DE MEDIDA'" [(visible)]="modalNuevoUnidadMedida" [modal]="true" [draggable]="false" [resizable]="true" [style]="{width: '50vw'}">
            <app-nuevo-unidaddemedida [idUnidadMedida]="idUnidadMedida"   (cerrar)="onRetornar($event)" > </app-nuevo-unidaddemedida>
        </p-dialog>
    </div>

</div>




