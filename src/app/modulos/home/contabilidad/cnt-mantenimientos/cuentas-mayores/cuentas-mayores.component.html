<div class="margintabla-home"> 
    <div class="card-box"> 
        <ngx-spinner bdColor="rgba(0,0,0,0.8)" size="meidum" [zIndex]="997"  color="#fff" type="timer" [fullScreen]="true">
            <p style="font-size: 20px; color: white">CARGANDO. </p>
        </ngx-spinner>
 
        <p-toolbar>
            <div class="p-toolbar-group-left">
                <h3> <i class="fa-solid fa-arrow-up-a-z"></i> <strong> Cuentas Mayores </strong></h3>
            </div>
            <div class="p-toolbar-group-right">
                <button 
                    class="p-button-registrar" 
                    pButton 
                    type="button" 
                    icon="pi pi-plus"
                    label="Agregar" 
                    tooltipPosition="left" 
                    pTooltip="Registrar una cuenta"
                    (click)="onAdd()">
                </button>
            </div>
        </p-toolbar>

        <p-table #dt [columns]="cols" [paginator]="true" 
        [rows]="20" responsiveLayout="scroll" selectionMode="single"
            [rowHover]="true" [value]="list">

            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.field">
                        {{ col.header }}
                        <p-sortIcon *ngIf="col.field != 'acciones'" [field]="col.field"
                            ariaLabel="Activate to sort"
                            ariaLabelDesc="Activate to sort in descending order"
                            ariaLabelAsc="Activate to sort in ascending order">
                        </p-sortIcon>
                    </th>
                </tr>
            </ng-template>

            <ng-template pTemplate="body" let-cmayor let-columns="columns" let-rowIndex="rowIndex">
                <tr [pSelectableRow]="cmayor" [pSelectableRowIndex]="rowIndex">
                    <td *ngFor="let col of columns">
                        <strong class="p-column-title">{{ col.header | uppercase}}</strong>
                        {{cmayor[col.field]}}
                        <ng-template #botones [ngIf]="col.field === 'acciones'">
                            <div style="display: flex;">
                                <button pButton type="button" tooltipPosition="top"
                                    class="p-button-generico-azul"
                                    pTooltip="Editar" (click)="onEdit(cmayor)"
                                    icon="pi pi-pencil">
                                </button>
                                <button pButton type="button" tooltipPosition="top"
                                    class="p-button-cancelar" 
                                    (click)="onDelete(cmayor)"
                                    pTooltip="Eliminar" icon="pi pi-trash">
                                </button>
                            </div>
                        </ng-template>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
     
</div>

<!-- MODAL  -->
<div *ngIf="vNuevaCuenta">
    <p-dialog [header]="(data) ? 'NUEVA CUENTA' : 'EDITAR CUENTA'" [(visible)]="vNuevaCuenta" [modal]="true"
        [draggable]="false" [resizable]="false">
        <app-nueva-cuenta (cerrar)="onRegresar($event)" [data]="data"></app-nueva-cuenta>
    </p-dialog>
</div>